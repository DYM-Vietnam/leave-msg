<!DOCTYPE html>
<html>
  <head>
    <base target="_top">
    <link rel="stylesheet" type="text/css" href="style.css" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script>
      function handleFormSubmit() {
        const leaveType = document.getElementById('leaveType').value;
        let message = '';

        switch (leaveType) {
          case '1day':
            const date1 = formatDate(document.getElementById('date1').value);
            const reason1 = document.getElementById('reason1').value;
            message = `@小林真之\n@Anh Co\n\nお疲れ様です。\n急な連絡となり、ご迷惑をおかけして大変申し訳ございません。\n\n${date1}日に有給休暇を取らせていただきます。\n理由：${reason1}\nご迷惑をおかけしますことを深くお詫び申し上げます。`;
            break;
          case 'halfDay':
            const date2 = formatDate(document.getElementById('date2').value);
            const session = document.querySelector('input[name="session"]:checked').value;
            const reason2 = document.getElementById('reason2').value;
            message = `@小林真之\n@Anh Co\n\nお疲れ様です。\n急な連絡となり、ご迷惑をおかけして大変申し訳ございません。\n\n${date2}の${session}に休暇を取らせていただきます。\n理由：${reason2}\nご迷惑をおかけしますことを深くお詫び申し上げます。`;
            break;
          case 'multipleDays':
            const startDate = formatDate(document.getElementById('startDate').value);
            const endDate = formatDate(document.getElementById('endDate').value);
            const reason3 = document.getElementById('reason3').value;
            message = `@小林真之\n@Anh Co\n\nお疲れ様です。\n急な連絡となり、ご迷惑をおかけして大変申し訳ございません。\n\n${startDate}～${endDate}までに有給休暇を取らせていただきます。\n理由：${reason3}\nご迷惑をおかけしますことを深くお詫び申し上げます。`;
            break;
          case 'late':
            const lateMinutes = document.getElementById('lateMinutes').value;
            message = `@小林真之\n@Ánh Cơ\n\nお疲れ様です。\n急な連絡となり、ご迷惑をおかけして大変申し訳ございません。\n\n本日${lateMinutes}分くらい遅刻させていただきます。\n理由: 渋滞のため\nご迷惑をおかけしますことを深くお詫び申し上げます。`;
            break;
          case 'Fkyuu':
            const fkyuuType = document.getElementById('fkyuuType').value;
            message = `@小林真之\n@Ánh Cơ\n\nお疲れ様です。\n急な連絡となり、ご迷惑をおかけして大変申し訳ございません。\n\n本日30分くらい${fkyuuType}させていただきます。\n理由: F休\nご迷惑をおかけしますことを深くお詫び申し上げます。`;
            break;
          case 'customize':
            const customDate = formatDate(document.getElementById('customDate').value);
            const startTime = document.getElementById('startTime').value || "未定"; // Nếu không nhập giờ, đặt là "未定"
            const endTime = document.getElementById('endTime').value || "未定"; // Nếu không nhập giờ, đặt là "未定"
            const reason4 = document.getElementById('reason4').value;
            message = `@小林真之\n@Anh Co\n\nお疲れ様です。\n急な連絡となり、ご迷惑をおかけして大変申し訳ございません。\n\n${customDate} の ${startTime}～ ${endTime}までに休暇を取らせていただきます。\n理由：${reason4}\nご迷惑をおかけしますことを深くお詫び申し上げます。`;
            break; 
        }

        document.getElementById('result').innerText = message; // Hiển thị kết quả
      }

      function formatDate(date) {
        const [year, month, day] = date.split('-');
        return `${parseInt(month)}月${parseInt(day)}日`; // Định dạng tháng và ngày
      }

      function copyToClipboard() {
        const resultText = document.getElementById('result').innerText;
        navigator.clipboard.writeText(resultText).then(() => {
          alert('Đã sao chép vào clipboard!');
        }).catch(err => {
          alert('Lỗi khi sao chép: ', err);
        });
      }
    </script>
  </head>
  <body>
    <h3>Xin nghỉ phép</h3>
    <form onsubmit="handleFormSubmit(); return false;">
      <label for="leaveType">Loại nghỉ:</label>
      <select id="leaveType" onchange="toggleFields()">
        <option value="late">Đi trễ</option>
        <option value="Fkyuu">F休</option>
        <option value="halfDay">Nửa ngày</option>
        <option value="1day">1 ngày</option>
        <option value="multipleDays">Nhiều ngày</option>
        <option value="customize">Tùy chọn</option>
      </select>
      <br><br>

      <div id="fields1day" style="display:none;">
        <label for="date1">Ngày:</label>
        <input type="date" id="date1">
        <label for="reason1">Lí do:</label>
        <select id="reason1">
          <option value="病気のため">Bệnh</option>
          <option value="家事都合のため">Việc gia đình</option>
          <option value="必要な手続きをするため">Làm giấy tờ</option>
          <option value="銀行に行くため">Đi ngân hàng</option>
        </select>
      </div>

      <div id="fieldsHalfDay" style="display:none;">
        <label for="date2">Ngày:</label>
        <input type="date" id="date2">
        <label>Buổi:</label>
        <input type="radio" name="session" value="午前"> Sáng
        <input type="radio" name="session" value="午後"> Chiều
        <label for="reason2">Lí do:</label>
        <select id="reason2">
          <option value="病気のため">Bệnh</option>
          <option value="家事都合のため">Việc gia đình</option>
          <option value="必要な手続きをするため">Làm giấy tờ</option>
          <option value="銀行に行くため">Đi ngân hàng</option>
        </select>
      </div>

      <div id="fieldsMultipleDays" style="display:none;">
        <div style="display: flex; align-items: center;">
          <div class="inline">
            <label for="startDate">Ngày bắt đầu:</label>
            <input type="date" id="startDate">
          </div>
          <div class="inline">
            <label for="endDate">Ngày kết thúc:</label>
            <input type="date" id="endDate">
          </div>
        </div>
        <label for="reason3">Lí do:</label>
        <select id="reason3">
          <option value="病気のため">Bệnh</option>
          <option value="家事都合のため">Việc gia đình</option>
          <option value="必要な手続きをするため">Làm giấy tờ</option>
          <option value="銀行に行くため">Đi ngân hàng</option>
        </select>
      </div>

      <div id="fieldsLate" style="display:none;">
        <label for="lateMinutes">Số phút đi trễ:</label>
        <input type="number" id="lateMinutes">
      </div>

      <div id="fieldsFkyuu" style="display:none;">
        <label for="fkyuuType">Loại:</label>
        <select id="fkyuuType">
          <option value="遅刻">Xin đi trễ</option>
          <option value="早退">Xin về sớm</option>
        </select>
      </div>

      <div id="fieldsCustomize" style="display:none;">
        <div style="display: flex; align-items: center;">
          <div class="inline">
            <label for="customDate">Ngày:</label>
            <input type="date" id="customDate">
          </div>
          <div class="inline">
            <label for="startTime">Giờ bắt đầu:</label>
            <input type="time" id="startTime"> <!-- Không bắt buộc nhập -->
          </div>
          <div class="inline">
            <label for="endTime">Giờ kết thúc:</label>
            <input type="time" id="endTime"> <!-- Không bắt buộc nhập -->
          </div>
        </div>
        <label for="reason4">Lí do:</label>
        <select id="reason4">
          <option value="病気のため">Bệnh</option>
          <option value="家事都合のため">Việc gia đình</option>
          <option value="必要な手続きをするため">Làm giấy tờ</option>
          <option value="銀行に行くため">Đi ngân hàng</option>
        </select>
      </div>

      <br>
      <input type="submit" value="Gửi">
      <button type="button" onclick="copyToClipboard()">Copy</button> <!-- Nút Copy -->
    </form>

    <div id="result"></div> <!-- Khu vực hiển thị kết quả -->

    <script>
      function toggleFields() {
        const leaveType = document.getElementById('leaveType').value;
        document.getElementById('fields1day').style.display = leaveType === '1day' ? 'block' : 'none';
        document.getElementById('fieldsHalfDay').style.display = leaveType === 'halfDay' ? 'block' : 'none';
        document.getElementById('fieldsMultipleDays').style.display = leaveType === 'multipleDays' ? 'block' : 'none';
        document.getElementById('fieldsLate').style.display = leaveType === 'late' ? 'block' : 'none';
        document.getElementById('fieldsFkyuu').style.display = leaveType === 'Fkyuu' ? 'block' : 'none';
        document.getElementById('fieldsCustomize').style.display = leaveType === 'customize' ? 'block' : 'none';
      }
    </script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  </body>
</html>
